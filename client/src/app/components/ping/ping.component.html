<app-name (nameChosen)="chosenNameFn($event)"></app-name>
    <div *ngIf="chosenName">
      <div *ngIf="!inRoom">
        <input pInputText type="text" placeholder="Room Name" [(ngModel)]="room" /><br/>
        <p-spinner [(ngModel)]="limit"></p-spinner><br/>
        <button pButton type="button" [disabled]="!room" (click)="sendRoom()" label="Create room"></button><br />
      </div>
      <hr/>
      <span style="color: lightblue">People:</span> {{ peopleCount }}

      <br />
      <div *ngFor="let peep of peeps">
        <div *ngFor="let p of [peep]">
        {{p.name}} <a (click)="whisperBoxVis = true">DM</a> <a>Call</a>
        <p-dialog header="DM" [(visible)]="whisperBoxVis"
    positionTop="100">
        <div class="ui-g">
            <div class="ui-g-12">
                <h3>{{p.name}}</h3>
                <form id="nameForm">
                    <div class="ui-g-12">
                        <div id="chat-div"  #scrollMe2>
                            <ul>
                              <li *ngFor="let msg of whispers">
                                <span [style.color]="'white'"> {{ msg.from }}: </span>
                                <span [style.color]="msg.color">{{ msg.msg }}</span>
                               <span style="float: right;color:white">{{ msg.time }}</span>
                              </li>
                            </ul>

                          </div>
                        <div class="ui-g-offset-1 ui-inputgroup">
                            <input (keydown.enter)="sendWhisper(p.id)" pInputText required type="text"
                                [(ngModel)]="whisper" placeholder="Whisper" name="whisper" />
                            <button type="button" pButton (click)="sendWhisper(p.id)" name="send" [disabled]="!whisper"
                                label="Enter"></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </p-dialog>
        </div>
      </div>

      <hr/>
      <span style="color: lightblue">Rooms:</span> {{ roomCount }}
      <ng-container *ngIf="!inRoom">
      <div *ngFor="let rm of rms" ><button pButton type="button" class="ui-button-info" [disabled]="!chosenName" (click)="joinRoom(rm.id)" label="Join {{ rm.name }}">
      </button>
    </div>
    </ng-container>
    <ng-container *ngFor="let rm of rms" >
      <div *ngIf="person.inroom === rm.id" ><button pButton type="button" class="ui-button-warning" (click)="leaveRoom(rm.id)" label="Leave {{ rm.name }}">
      </button>
      <div *ngFor="let people of rm.people">
          <div *ngFor="let peep of peeps">
              <div *ngFor="let p of [peep]">
                <div *ngIf="p.id === people">{{p.name}}</div>
              </div>
            </div>
        </div>
    </div>
    </ng-container>

      <div id="chat-div" *ngIf="messages.length > 0" #scrollMe>
        <ul>
          <li *ngFor="let msg of messages">
            <span [style.color]="'white'"> {{ msg.from }}: </span>
            <span [style.color]="msg.color">{{ msg.msg }}</span>
           <span style="float: right;color:white">{{ msg.time }}</span>
          </li>
        </ul>

      </div>
      <input [(ngModel)]="msg" />
      <button type="button" [disabled]="!nameFlag && !msg" (click)="sendMsg()">Send Msg</button><br />


      <br />

    </div>
